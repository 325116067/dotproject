{if $tabview == 0}
<table border="0" cellpadding="2" cellspacing="0" width="100%">
	<tr>
		<td nowrap="nowrap">
			<a href="{$current_tab}tab=0">{dPtranslate word='tabbed'}</a> : 
			<a href="{$current_tab}tab=-1">{dPtranslate word='flat'}</a>
		</td>
		{$extra}
	</tr>
</table>
{else}
	{if $extra}
<table border="0" cellpadding="2" cellspacing="0" width="100%">
	<tr>
		{$extra}
	</tr>
</table>
	{else}
	<img src="./images/shim.gif" alt="shim" height="10" width="1" />
	{/if}
{/if}

{if $active < 0 || $tabview == 2}
		{* flat view, active = -1 *}
<table border="0" cellpadding="2" cellspacing="0" width="100%">
	{foreach from=$tabs item=v key=k}
	<tr>
		<td><strong>{if $v[2]}{$v[1]}{else}{dPtranslate word=$v[1]}{/if}</strong></td>
	</tr>
	<tr>
		<td>
		{php}
				$currentTabId = $k;
				$currentTabName = $v[1];
		{/php}
		{dPrequire file="$base$v[0].php"}
		</td>
	</tr>
	{/foreach}
</table>
{else}
{* tabbed view *}
<table width="100%" border="0" cellpadding="3" cellspacing="0">
	<tr>
			{if $totaltabs-1 < $active}
				{*//Last selected tab is not available in this view. eg. Child tasks*}
				{assign var=active value=0}
			{/if}
{foreach from=$tabs item=v key=k}
		<td width="1%" nowrap="nowrap" class="tabsp">
			<img src="./images/shim.gif" height="1" width="1" alt="" />
		</td>
		<td id="toptab_{$k}" width="1%" nowrap="nowrap"{if $js_tabs} class="{if $k == $active}tabon{else}taboff{/if}"{/if}>
			<a href="{if $javascript}javascript:{$javascript}({$active}, {$k})
	{elseif $js_tabs}javascript:show_tab({$k})
	{else}{$current_tab}tab={$k}{/if}">{if $v[2]}{$v[1]}{else}{dPtranslate word=$v[1]}{/if}</a>
		</td>
{/foreach}
		<td nowrap="nowrap" class="tabsp">&nbsp;</td>
	</tr>
	<tr>
		<td width="100%" colspan="{$totaltabs*4 + 1}" class="tabox">
			{dPrequire file=$tab}
{if $js_tabs}
	{foreach from=$tabs item=v key=k} 
	<div class="tab" id="tab_{$k}">
		{dPrequire file="$base$v[0].php"}
	</div>
	{/foreach}
{/if}
		</td>
	</tr>
</table>
{/if}
